<div class="container">
  <h1>Welcome to the Voting System</h1>

  <img
    src="https://configcat.com/images/home/logo.svg"
    alt="ConfigCat Logo"
    width="200"
    height="200"
    class="logo"
  />

  <div *ngIf="votingFeatureEnabled && !votingClosed">
    <label>
      <input
        type="radio"
        name="mode"
        value="single"
        (change)="switchVotingMode('single')"
        [checked]="votingMode === 'single'"
        [disabled]="votingClosed"
      />
      Single Vote
    </label>
    <label>
      <input
        type="radio"
        name="mode"
        value="multiple"
        (change)="switchVotingMode('multiple')"
        [checked]="votingMode === 'multiple'"
        [disabled]="votingClosed"
      />
      Multiple Votes
    </label>
  </div>

  <div
    class="voting-form"
    *ngIf="votingFeatureEnabled && !votingClosed; else votingClosedTemplate"
  >
    <h3>Time left: {{ countdown }} seconds</h3>

    <img *ngIf="imageUrl" [src]="imageUrl" alt="Random" class="voting-image" />

    <input
      type="number"
      #voteInput
      min="1"
      max="10"
      placeholder="Enter your vote"
      class="vote-input"
      [disabled]="votingClosed"
    />
    <button
      class="vote-button"
      (click)="submitVote(voteInput.valueAsNumber)"
      [disabled]="votingMode === 'single' && votes.length > 0"
    >
      Send Vote!
    </button>

    <h3 *ngIf="votes.length > 0">Average Vote: {{ getAverageVote() }}</h3>
  </div>

  <ng-template #votingClosedTemplate>
    <h3>The voting has ended! Here are the results!</h3>
    <div class="voting-form">
      <img
        *ngIf="imageUrl"
        [src]="imageUrl"
        alt="Random"
        class="voting-image"
      />
    </div>
    <h3>Final Average Vote: {{ getAverageVote() }}</h3>
  </ng-template>
</div>
